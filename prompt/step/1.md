# Step 1: Docker Development Environment Setup

## Overview
Set up local development environment containers for Java, Python, MySQL, Redis, RabbitMQ, and vector database services on your Linux virtual machine.

## Prerequisites Checklist
Before starting, ensure you have:
- [ ] Windows computer with virtualization enabled
- [ ] Linux virtual machine (Ubuntu 20.04+ recommended) running
- [ ] Docker installed on Linux VM
- [ ] Docker Compose installed on Linux VM
- [ ] Internet connection for pulling Docker images
- [ ] At least 8GB RAM allocated to VM
- [ ] At least 50GB disk space available

## Required File Structure
Create the following directory structure on your Linux VM:

```
/home/your-username/offerkiller/
‚îú‚îÄ‚îÄ docker/
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ dockerfiles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ python/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ my.cnf
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ init.sql
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis.conf
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rabbitmq/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rabbitmq.conf
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chroma/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ chroma.yml
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rabbitmq/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chroma/
‚îÇ   ‚îî‚îÄ‚îÄ logs/
‚îÇ       ‚îú‚îÄ‚îÄ mysql/
‚îÇ       ‚îú‚îÄ‚îÄ redis/
‚îÇ       ‚îú‚îÄ‚îÄ rabbitmq/
‚îÇ       ‚îî‚îÄ‚îÄ app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ ai-services/
‚îÇ   ‚îî‚îÄ‚îÄ frontend/
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ setup.sh
    ‚îú‚îÄ‚îÄ start-dev.sh
    ‚îî‚îÄ‚îÄ stop-dev.sh
```

## Step-by-Step Implementation

### 1.1 Connect to Your Linux VM
From Windows, connect to your Linux VM using:
- SSH client (PuTTY, Windows Terminal, or VS Code Remote SSH)
- Or direct VM console access

### 1.2 Create Project Directory Structure
```bash
# Navigate to home directory
cd ~

# Create main project directory
mkdir -p offerkiller/{docker/{dockerfiles/{java,python,nginx},config/{mysql,redis,rabbitmq,chroma},data/{mysql,redis,rabbitmq,chroma},logs/{mysql,redis,rabbitmq,app}},src/{backend,ai-services,frontend},scripts}

# Navigate to project root
cd offerkiller
```

### 1.3 Create Docker Compose Configuration
Create file: `/home/your-username/offerkiller/docker/docker-compose.yml`

```yaml
version: '3.8'

networks:
  offerkiller-network:
    driver: bridge

volumes:
  mysql-data:
  redis-data:
  rabbitmq-data:
  chroma-data:

services:
  # MySQL Database
  mysql:
    image: mysql:8.0
    container_name: offerkiller-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword123
      MYSQL_DATABASE: offerkiller
      MYSQL_USER: offerkilleruser
      MYSQL_PASSWORD: offerkillerpass123
    ports:
      - "3306:3306"
    volumes:
      - mysql-data:/var/lib/mysql
      - ./config/mysql/my.cnf:/etc/mysql/conf.d/my.cnf
      - ./config/mysql/init.sql:/docker-entrypoint-initdb.d/init.sql
      - ./logs/mysql:/var/log/mysql
    networks:
      - offerkiller-network
    healthcheck:
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
      timeout: 20s
      retries: 10

  # Redis Cache
  redis:
    image: redis:7-alpine
    container_name: offerkiller-redis
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data
      - ./config/redis/redis.conf:/usr/local/etc/redis/redis.conf
      - ./logs/redis:/var/log/redis
    command: redis-server /usr/local/etc/redis/redis.conf
    networks:
      - offerkiller-network
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 30s
      timeout: 10s
      retries: 3

  # RabbitMQ Message Broker
  rabbitmq:
    image: rabbitmq:3.12-management-alpine
    container_name: offerkiller-rabbitmq
    restart: unless-stopped
    environment:
      RABBITMQ_DEFAULT_USER: offerkilleruser
      RABBITMQ_DEFAULT_PASS: offerkillerpass123
      RABBITMQ_DEFAULT_VHOST: offerkiller
    ports:
      - "5672:5672"    # AMQP port
      - "15672:15672"  # Management UI
    volumes:
      - rabbitmq-data:/var/lib/rabbitmq
      - ./config/rabbitmq/rabbitmq.conf:/etc/rabbitmq/rabbitmq.conf
      - ./logs/rabbitmq:/var/log/rabbitmq
    networks:
      - offerkiller-network
    healthcheck:
      test: ["CMD", "rabbitmq-diagnostics", "ping"]
      interval: 30s
      timeout: 10s
      retries: 3

  # ChromaDB Vector Database
  chromadb:
    image: chromadb/chroma:latest
    container_name: offerkiller-chroma
    restart: unless-stopped
    ports:
      - "8000:8000"
    volumes:
      - chroma-data:/chroma/chroma
      - ./config/chroma/chroma.yml:/chroma/chroma.yml
    environment:
      - CHROMA_HOST=0.0.0.0
      - CHROMA_PORT=8000
      - CHROMA_LOG_LEVEL=INFO
    networks:
      - offerkiller-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/api/v1/heartbeat"]
      interval: 30s
      timeout: 10s
      retries: 3

  # Java Development Environment
  java-dev:
    build:
      context: ./dockerfiles/java
      dockerfile: Dockerfile
    container_name: offerkiller-java-dev
    restart: unless-stopped
    ports:
      - "8080:8080"  # Main Spring Boot app
      - "8081:8081"  # User service
      - "8082:8082"  # Job service
      - "8083:8083"  # AI orchestration service
      - "5005:5005"  # Java debug port
    volumes:
      - ../src/backend:/workspace/backend
      - ./logs/app:/workspace/logs
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
      - RABBITMQ_HOST=rabbitmq
      - CHROMA_HOST=chromadb
    depends_on:
      mysql:
        condition: service_healthy
      redis:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy
      chromadb:
        condition: service_healthy
    networks:
      - offerkiller-network
    working_dir: /workspace/backend
    healthcheck:
      test: ["CMD", "java", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # Python AI Services Environment
  python-ai:
    build:
      context: ./dockerfiles/python
      dockerfile: Dockerfile
    container_name: offerkiller-python-ai
    restart: unless-stopped
    ports:
      - "8090:8090"  # AI service API
      - "8091:8091"  # ML model serving
      - "8888:8888"  # Jupyter notebook
    volumes:
      - ../src/ai-services:/workspace/ai-services
      - ./data:/workspace/data
      - ./logs/app:/workspace/logs
    environment:
      - PYTHONPATH=/workspace/ai-services
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
      - RABBITMQ_HOST=rabbitmq
      - CHROMA_HOST=chromadb
      - HUGGINGFACE_HUB_CACHE=/workspace/data/hf-cache
    depends_on:
      mysql:
        condition: service_healthy
      redis:
        condition: service_healthy
      rabbitmq:
        condition: service_healthy
      chromadb:
        condition: service_healthy
    networks:
      - offerkiller-network
    working_dir: /workspace/ai-services
    healthcheck:
      test: ["CMD", "python", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # Nginx Reverse Proxy
  nginx:
    build:
      context: ./dockerfiles/nginx
      dockerfile: Dockerfile
    container_name: offerkiller-nginx
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./config/nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./logs/nginx:/var/log/nginx
    depends_on:
      - java-dev
      - python-ai
    networks:
      - offerkiller-network
```

### 1.4 Create MySQL Configuration
Create file: `/home/your-username/offerkiller/docker/config/mysql/my.cnf`

```ini
[mysqld]
# Basic Settings
default-storage-engine=innodb
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

# Performance Settings
innodb_buffer_pool_size=512M
innodb_log_file_size=128M
innodb_flush_log_at_trx_commit=1
innodb_flush_method=O_DIRECT

# Connection Settings
max_connections=200
max_allowed_packet=64M

# Logging
log-error=/var/log/mysql/error.log
slow_query_log=1
slow_query_log_file=/var/log/mysql/slow.log
long_query_time=2

# Binary Logging for Replication
server-id=1
log-bin=mysql-bin
binlog_format=ROW
expire_logs_days=7

[mysql]
default-character-set=utf8mb4

[client]
default-character-set=utf8mb4
```

Create file: `/home/your-username/offerkiller/docker/config/mysql/init.sql`

```sql
-- Create databases
CREATE DATABASE IF NOT EXISTS offerkiller CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE DATABASE IF NOT EXISTS offerkiller_test CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Create application user with proper permissions
CREATE USER IF NOT EXISTS 'offerkilleruser'@'%' IDENTIFIED BY 'offerkillerpass123';
GRANT ALL PRIVILEGES ON offerkiller.* TO 'offerkilleruser'@'%';
GRANT ALL PRIVILEGES ON offerkiller_test.* TO 'offerkilleruser'@'%';

-- Create initial tables
USE offerkiller;

CREATE TABLE IF NOT EXISTS users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE,
    INDEX idx_email (email),
    INDEX idx_created_at (created_at)
);

CREATE TABLE IF NOT EXISTS user_profiles (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    resume_content TEXT,
    skills JSON,
    experience_years INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id)
);

CREATE TABLE IF NOT EXISTS job_postings (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    title VARCHAR(500) NOT NULL,
    company VARCHAR(255) NOT NULL,
    description TEXT NOT NULL,
    requirements TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_created_at (created_at)
);

FLUSH PRIVILEGES;
```

### 1.5 Create Redis Configuration
Create file: `/home/your-username/offerkiller/docker/config/redis/redis.conf`

```conf
# Basic Settings
bind 0.0.0.0
port 6379
protected-mode no
timeout 0
tcp-keepalive 300

# Memory Management
maxmemory 512mb
maxmemory-policy allkeys-lru

# Persistence
save 900 1
save 300 10
save 60 10000
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
dir /data

# Logging
loglevel notice
logfile /var/log/redis/redis-server.log

# Append Only File
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Slow Log
slowlog-log-slower-than 10000
slowlog-max-len 128
```

### 1.6 Create RabbitMQ Configuration
Create file: `/home/your-username/offerkiller/docker/config/rabbitmq/rabbitmq.conf`

```conf
# Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

# Virtual Hosts
default_vhost = offerkiller

# User Management
default_user = offerkilleruser
default_pass = offerkillerpass123

# Memory Management
vm_memory_high_watermark.relative = 0.6
disk_free_limit.relative = 2.0

# Logging
log.file = /var/log/rabbitmq/rabbit.log
log.file.level = info
log.file.rotation.date = $D0
log.file.rotation.count = 10
log.file.rotation.size = 100MB

# Clustering
cluster_formation.peer_discovery_backend = rabbit_peer_discovery_classic_config
```

### 1.7 Create ChromaDB Configuration
Create file: `/home/your-username/offerkiller/docker/config/chroma/chroma.yml`

```yaml
# ChromaDB Configuration
persist_directory: /chroma/chroma
chroma_server_host: 0.0.0.0
chroma_server_http_port: 8000
chroma_server_cors_allow_origins: ["*"]

# Authentication (disabled for development)
chroma_server_auth_provider: "chromadb.auth.simple.SimpleAuthenticationServerProvider"
chroma_server_auth_credentials_file: ""
chroma_server_auth_credentials: ""

# Telemetry
anonymized_telemetry: false

# Logging
chroma_log_level: "INFO"
```

### 1.8 Create Java Development Dockerfile
Create file: `/home/your-username/offerkiller/docker/dockerfiles/java/Dockerfile`

```dockerfile
FROM openjdk:17-jdk-slim

# Install essential tools
RUN apt-get update && apt-get install -y \
    curl \
    wget \
    git \
    maven \
    vim \
    net-tools \
    && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /workspace

# Install Maven (latest version)
RUN wget https://archive.apache.org/dist/maven/maven-3/3.9.5/binaries/apache-maven-3.9.5-bin.tar.gz \
    && tar -xzf apache-maven-3.9.5-bin.tar.gz \
    && mv apache-maven-3.9.5 /opt/maven \
    && rm apache-maven-3.9.5-bin.tar.gz

# Set environment variables
ENV MAVEN_HOME=/opt/maven
ENV PATH=${MAVEN_HOME}/bin:${PATH}
ENV JAVA_OPTS="-Xmx2g -Xms1g -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005"

# Create application directory
RUN mkdir -p /workspace/backend /workspace/logs

# Expose ports
EXPOSE 8080 8081 8082 8083 5005

# Keep container running
CMD ["tail", "-f", "/dev/null"]
```

### 1.9 Create Python AI Services Dockerfile
Create file: `/home/your-username/offerkiller/docker/dockerfiles/python/Dockerfile`

```dockerfile
FROM python:3.11-slim

# Install system dependencies
RUN apt-get update && apt-get install -y \
    curl \
    wget \
    git \
    build-essential \
    libpq-dev \
    vim \
    net-tools \
    && rm -rf /var/lib/apt/lists/*

# Set working directory
WORKDIR /workspace

# Install Python packages
COPY requirements.txt /tmp/requirements.txt
RUN pip install --no-cache-dir -r /tmp/requirements.txt

# Create application directories
RUN mkdir -p /workspace/ai-services /workspace/data /workspace/logs /workspace/data/hf-cache

# Set environment variables
ENV PYTHONPATH=/workspace/ai-services
ENV TRANSFORMERS_CACHE=/workspace/data/hf-cache
ENV HF_HOME=/workspace/data/hf-cache

# Expose ports
EXPOSE 8090 8091 8888

# Keep container running
CMD ["tail", "-f", "/dev/null"]
```

Create file: `/home/your-username/offerkiller/docker/dockerfiles/python/requirements.txt`

```txt
# Core AI/ML Libraries
torch>=2.0.0
transformers>=4.30.0
accelerate>=0.20.0
datasets>=2.10.0
tokenizers>=0.13.0

# Vector Database & Embeddings
chromadb>=0.4.0
sentence-transformers>=2.2.0
faiss-cpu>=1.7.4

# Web Framework & API
fastapi>=0.100.0
uvicorn>=0.22.0
pydantic>=2.0.0
httpx>=0.24.0

# Data Processing
pandas>=2.0.0
numpy>=1.24.0
scikit-learn>=1.3.0
nltk>=3.8.0
spacy>=3.6.0

# PDF Processing
PyPDF2>=3.0.0
pdfplumber>=0.9.0
python-multipart>=0.0.6

# Database & Cache
pymysql>=1.1.0
redis>=4.6.0
sqlalchemy>=2.0.0

# Message Queue
pika>=1.3.0
celery>=5.3.0

# MLOps & Experiment Tracking
mlflow>=2.5.0
wandb>=0.15.0
dvc>=3.0.0

# Utilities
python-dotenv>=1.0.0
requests>=2.31.0
beautifulsoup4>=4.12.0
scrapy>=2.10.0

# Development Tools
jupyter>=1.0.0
ipython>=8.14.0
pytest>=7.4.0
black>=23.7.0
flake8>=6.0.0

# Monitoring & Logging
prometheus-client>=0.17.0
structlog>=23.1.0
```

### 1.10 Create Nginx Dockerfile
Create file: `/home/your-username/offerkiller/docker/dockerfiles/nginx/Dockerfile`

```dockerfile
FROM nginx:alpine

# Install additional tools
RUN apk add --no-cache curl

# Copy custom configuration
COPY nginx.conf /etc/nginx/nginx.conf

# Create log directory
RUN mkdir -p /var/log/nginx

# Expose ports
EXPOSE 80 443

CMD ["nginx", "-g", "daemon off;"]
```

Create file: `/home/your-username/offerkiller/docker/config/nginx/nginx.conf`

```nginx
events {
    worker_connections 1024;
}

http {
    upstream java_backend {
        server java-dev:8080;
    }
    
    upstream python_ai {
        server python-ai:8090;
    }
    
    server {
        listen 80;
        server_name localhost;
        
        # Java Backend API
        location /api/ {
            proxy_pass http://java_backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # Python AI Services
        location /ai/ {
            proxy_pass http://python_ai;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
        
        # Health check
        location /health {
            access_log off;
            return 200 "healthy\n";
            add_header Content-Type text/plain;
        }
    }
}
```

### 1.11 Create Setup Scripts
Create file: `/home/your-username/offerkiller/scripts/setup.sh`

```bash
#!/bin/bash

# OfferKiller Development Environment Setup Script

echo "üöÄ Setting up OfferKiller development environment..."

# Check if Docker is installed
if ! command -v docker &> /dev/null; then
    echo "‚ùå Docker is not installed. Please install Docker first."
    exit 1
fi

# Check if Docker Compose is installed
if ! command -v docker-compose &> /dev/null; then
    echo "‚ùå Docker Compose is not installed. Please install Docker Compose first."
    exit 1
fi

# Navigate to docker directory
cd "$(dirname "$0")/../docker"

# Create data directories with proper permissions
echo "üìÅ Creating data directories..."
sudo mkdir -p data/{mysql,redis,rabbitmq,chroma}
sudo mkdir -p logs/{mysql,redis,rabbitmq,app,nginx}
sudo chown -R $USER:$USER data/ logs/

# Set proper permissions
chmod 755 data/
chmod 755 logs/
chmod -R 755 data/*
chmod -R 755 logs/*

# Pull required Docker images
echo "üì• Pulling Docker images..."
docker pull mysql:8.0
docker pull redis:7-alpine
docker pull rabbitmq:3.12-management-alpine
docker pull chromadb/chroma:latest
docker pull nginx:alpine
docker pull python:3.11-slim
docker pull openjdk:17-jdk-slim

echo "‚úÖ Setup completed! You can now start the development environment."
echo "üí° Use './scripts/start-dev.sh' to start all services"
```

Create file: `/home/your-username/offerkiller/scripts/start-dev.sh`

```bash
#!/bin/bash

echo "üöÄ Starting OfferKiller development environment..."

# Navigate to docker directory
cd "$(dirname "$0")/../docker"

# Start all services
docker-compose up -d

# Wait for services to be ready
echo "‚è≥ Waiting for services to start..."
sleep 30

# Check service health
echo "üîç Checking service health..."

# Check MySQL
if docker exec offerkiller-mysql mysqladmin ping -h localhost --silent; then
    echo "‚úÖ MySQL is running"
else
    echo "‚ùå MySQL is not responding"
fi

# Check Redis
if docker exec offerkiller-redis redis-cli ping | grep -q PONG; then
    echo "‚úÖ Redis is running"
else
    echo "‚ùå Redis is not responding"
fi

# Check RabbitMQ
if docker exec offerkiller-rabbitmq rabbitmq-diagnostics ping --quiet; then
    echo "‚úÖ RabbitMQ is running"
else
    echo "‚ùå RabbitMQ is not responding"
fi

# Check ChromaDB
if curl -s http://localhost:8000/api/v1/heartbeat | grep -q heartbeat; then
    echo "‚úÖ ChromaDB is running"
else
    echo "‚ùå ChromaDB is not responding"
fi

echo ""
echo "üéâ Development environment is ready!"
echo ""
echo "üìã Service URLs:"
echo "   MySQL:           localhost:3306"
echo "   Redis:           localhost:6379"
echo "   RabbitMQ:        localhost:5672"
echo "   RabbitMQ UI:     http://localhost:15672 (user: offerkilleruser, pass: offerkillerpass123)"
echo "   ChromaDB:        http://localhost:8000"
echo "   Java Debug:      localhost:5005"
echo "   Jupyter:         http://localhost:8888"
echo "   Nginx:           http://localhost:80"
echo ""
echo "üìÇ Development directories:"
echo "   Backend:         ./src/backend"
echo "   AI Services:     ./src/ai-services"
echo "   Frontend:        ./src/frontend"
echo ""
echo "üîß Useful commands:"
echo "   View logs:       docker-compose logs -f [service-name]"
echo "   Stop services:   ./scripts/stop-dev.sh"
echo "   Restart:         docker-compose restart [service-name]"
```

Create file: `/home/your-username/offerkiller/scripts/stop-dev.sh`

```bash
#!/bin/bash

echo "üõë Stopping OfferKiller development environment..."

# Navigate to docker directory
cd "$(dirname "$0")/../docker"

# Stop all services
docker-compose down

echo "‚úÖ All services stopped."
echo "üí° To completely remove containers and data, run: docker-compose down -v"
```

### 1.12 Make Scripts Executable
```bash
# Navigate to project root
cd ~/offerkiller

# Make scripts executable
chmod +x scripts/*.sh
```

### 1.13 Initialize and Start Environment
```bash
# Run setup script
./scripts/setup.sh

# Start development environment
./scripts/start-dev.sh
```

## Validation Steps
After setup, verify everything is working:

1. **Check all containers are running:**
```bash
docker ps
```

2. **Test database connection:**
```bash
docker exec -it offerkiller-mysql mysql -u offerkilleruser -pofferkillerpass123 -e "SHOW DATABASES;"
```

3. **Test Redis:**
```bash
docker exec -it offerkiller-redis redis-cli ping
```

4. **Test RabbitMQ Management UI:**
Open browser: http://your-vm-ip:15672
Login: offerkilleruser / offerkillerpass123

5. **Test ChromaDB:**
```bash
curl http://localhost:8000/api/v1/heartbeat
```

## Windows Development Setup
To develop from Windows while containers run on Linux VM:

1. **Install VS Code with Remote SSH extension**
2. **Connect to your Linux VM via SSH**
3. **Open the project folder:** `/home/your-username/offerkiller`
4. **Install VS Code extensions for Java and Python development**

## Troubleshooting

### Health Check Issues (Container Unhealthy Errors):

If you encounter "Container is unhealthy" errors, try this step-by-step approach:

#### 1. First, stop all services:
```bash
cd ~/offerkiller/docker
docker-compose down -v
```

#### 2. Check container logs to see what's failing:
```bash
# Check what went wrong
docker-compose logs java-dev
docker-compose logs python-ai
```

#### 3. Build containers individually to check for errors:
```bash
# Build Java container
docker-compose build java-dev

# Build Python container  
docker-compose build python-ai
```

#### 4. If health checks still fail, use this temporary docker-compose.yml:
Create a backup of your current docker-compose.yml and replace the java-dev and python-ai sections with this simplified version:

```yaml
  # Java Development Environment (Simplified - No Health Check)
  java-dev:
    build:
      context: ./dockerfiles/java
      dockerfile: Dockerfile
    container_name: offerkiller-java-dev
    restart: unless-stopped
    ports:
      - "8080:8080"
      - "8081:8081" 
      - "8082:8082"
      - "8083:8083"
      - "5005:5005"
    volumes:
      - ../src/backend:/workspace/backend
      - ./logs/app:/workspace/logs
    environment:
      - SPRING_PROFILES_ACTIVE=dev
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
      - RABBITMQ_HOST=rabbitmq
      - CHROMA_HOST=chromadb
    depends_on:
      - mysql
      - redis
      - rabbitmq
      - chromadb
    networks:
      - offerkiller-network
    working_dir: /workspace/backend

  # Python AI Services Environment (Simplified - No Health Check)
  python-ai:
    build:
      context: ./dockerfiles/python
      dockerfile: Dockerfile
    container_name: offerkiller-python-ai
    restart: unless-stopped
    ports:
      - "8090:8090"
      - "8091:8091"
      - "8888:8888"
    volumes:
      - ../src/ai-services:/workspace/ai-services
      - ./data:/workspace/data
      - ./logs/app:/workspace/logs
    environment:
      - PYTHONPATH=/workspace/ai-services
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
      - RABBITMQ_HOST=rabbitmq
      - CHROMA_HOST=chromadb
      - HUGGINGFACE_HUB_CACHE=/workspace/data/hf-cache
    depends_on:
      - mysql
      - redis
      - rabbitmq
      - chromadb
    networks:
      - offerkiller-network
    working_dir: /workspace/ai-services
```

#### 5. Restart with simplified configuration:
```bash
docker-compose up -d
```

### Common Issues:
- **Permission denied:** Run `sudo chown -R $USER:$USER ~/offerkiller`
- **Port conflicts:** Check if ports 3306, 6379, 5672, 8000 are free with `sudo netstat -tulpn | grep :3306`
- **Memory issues:** Increase VM RAM to at least 8GB
- **Network issues:** Ensure VM has internet access
- **Build failures:** Check if all Dockerfile paths and requirements.txt exist

### Useful Debugging Commands:
```bash
# View service logs
docker-compose logs -f mysql
docker-compose logs -f redis
docker-compose logs -f rabbitmq
docker-compose logs -f java-dev
docker-compose logs -f python-ai

# Check container status
docker ps -a

# Restart specific service
docker-compose restart mysql

# Access container shell for debugging
docker exec -it offerkiller-mysql bash
docker exec -it offerkiller-redis bash
docker exec -it offerkiller-java-dev bash
docker exec -it offerkiller-python-ai bash

# Check resource usage
docker stats

# Clean everything and restart
docker-compose down -v
docker system prune -f
./scripts/start-dev.sh

# Force rebuild all containers
docker-compose build --no-cache
docker-compose up -d
```

### Quick Fix Script:
If you're still having issues, create this emergency fix script:

Create file: `/home/your-username/offerkiller/scripts/emergency-start.sh`
```bash
#!/bin/bash
echo "üö® Emergency start without health checks..."
cd "$(dirname "$0")/../docker"

# Stop everything
docker-compose down -v

# Start only core services first
docker-compose up -d mysql redis rabbitmq chromadb

# Wait for them to be ready
sleep 30

# Start development containers without health check dependencies
docker-compose up -d java-dev python-ai nginx

echo "‚úÖ Emergency startup complete!"
echo "Check status with: docker ps"
```

Make it executable and run:
```bash
chmod +x scripts/emergency-start.sh
./scripts/emergency-start.sh
```

## Next Steps
Once this step is completed:
1. All development environment containers will be running
2. You can proceed to Step 2: Git repository initialization
3. Development can begin from Windows using VS Code Remote SSH
4. All services will be accessible from your Windows development environment

## Security Notes
- Change default passwords before production deployment
- These configurations are for development only
- Enable authentication and TLS for production use
